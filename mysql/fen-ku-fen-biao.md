# 分库分表

## 分库分表

{% embed url="https://mp.weixin.qq.com/s/aE35MXn5Mf3SdwJzoOSeeg" %}

## 主从复制

MySQL主从复制是一种常用的数据库复制技术，用于在多台数据库服务器之间同步数据。其原理如下：

1. **主数据库（Master）**：主数据库是数据的源头，它负责处理写操作（INSERT、UPDATE、DELETE）和数据变更。当主数据库上的数据发生变化时，这些变更会被记录在主数据库的二进制日志（Binary Log）中。
2. **从数据库（Slave）**：从数据库是主数据库的副本，它负责处理读操作，并且从主数据库获取数据变更，使得从数据库的数据与主数据库保持一致。

主从复制的步骤如下：

1. **主数据库记录二进制日志（Binary Log）**：主数据库在执行写操作时，将这些操作以二进制日志的形式记录下来，包括写操作的SQL语句和数据变更。
2. **从数据库连接主数据库**：从数据库连接到主数据库，并请求成为它的从数据库。主数据库会为从数据库分配一个唯一标识。
3. **主数据库将二进制日志发送给从数据库**：主数据库将记录在二进制日志中的数据变更发送给从数据库。这些数据变更以事件的形式传递，可以是SQL语句，也可以是行数据的变更。
4. **从数据库应用数据变更**：从数据库接收到主数据库发送的数据变更后，会在本地执行这些变更，使得从数据库的数据与主数据库保持一致。

通过这样的方式，主从复制实现了数据的同步。从数据库可以用于读操作，分担主数据库的压力，同时也可以作为灾备，提供故障切换和数据备份的功能。

需要注意的是，主从复制是异步的，从数据库上的数据变更可能会有一定的延迟。同时，主从复制也需要考虑数据一致性、主库故障切换等情况下的处理机制，以保证系统的稳定性和可靠性。

\
